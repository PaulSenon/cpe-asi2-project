FROM node:12

# Create app directory
WORKDIR /usr/src/app

ADD package*.json ./

RUN yarn

ADD . .

ENV SERVER_PORT=$SERVER_PORT
ENV BROCKER_HOST=$BROCKER_HOST
ENV BROCKER_PORT=$BROCKER_PORT
ENV BROCKER_USER=$BROCKER_USER
ENV BROCKER_PWD=$BROCKER_PWD
ENV MQ_OUT_LOGS=$MQ_OUT_LOGS

EXPOSE $SERVER_PORT

CMD [ "yarn", "start" ]